webpackJsonp([45,48],{1534:function(n,s){n.exports={content:["article",["p","\u5728\u7528\u6237\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u9047\u5230\u5404\u79cd\u5f02\u5e38\u60c5\u51b5\uff0c\u6bd4\u5982\u9875\u9762404\uff0c\u7533\u8bf7\u7ed3\u679c\u5931\u8d25\uff0c\u8bf7\u6c42\u7684\u8fd4\u56de\u5f02\u5e38\u7b49\u7b49\uff0c\u8fd9\u7bc7\u6587\u6863\u4f1a\u6309\u7167\u62a5\u9519\u5f62\u5f0f\u7684\u4e0d\u540c\uff0c\u5206\u522b\u4ecb\u7ecd\u4e0b\u76f8\u5e94\u7684\u5904\u7406\u5efa\u8bae\u3002"],["h2","\u9875\u9762\u7ea7\u62a5\u9519"],["h3","\u5e94\u7528\u573a\u666f"],["ul",["li",["p","\u8def\u7531\u76f4\u63a5\u5f15\u5bfc\u5230\u62a5\u9519\u9875\u9762\uff0c\u6bd4\u5982\u4f60\u53ef\u4ee5\u5c06\u65e0\u6548\u7684\u94fe\u63a5 redirect \u5230\u9884\u8bbe\u7684 404 \u9875\u9762\u3002"]],["li",["p","\u4ee3\u7801\u63a7\u5236\u8df3\u8f6c\u5230\u62a5\u9519\u9875\u9762\uff0c\u6bd4\u5982\u6839\u636e\u8bf7\u6c42\u8fd4\u56de\u7684\u6570\u636e\uff0c\u5c06\u6ca1\u6709\u6743\u9650\u7684\u7528\u6237\u5f15\u5bfc\u5230 403 \u9875\u9762\u3002"]]],["h3","\u5b9e\u73b0"],["p","\u9488\u5bf9\u9875\u9762\u7ea7\u7684\u62a5\u9519\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u4e24\u4e2a\u4e1a\u52a1\u7ec4\u4ef6\u4f9b\u4f60\u9009\u62e9\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5b9e\u73b0\u4e00\u4e2a\u62a5\u9519\u9875\u9762\uff1a"],["p",["code","Exception \u5f02\u5e38\u9875"]],["pre",{lang:"js",highlighted:'<span class="token operator">&lt;</span>Exception type<span class="token operator">=</span><span class="token string">"404"</span> <span class="token operator">/</span><span class="token operator">></span>'},["code",'<Exception type="404" />']],["p","\u9ed8\u8ba4\u652f\u6301 404\uff0c403\uff0c500 \u4e09\u79cd\u9519\u8bef\uff0c\u4e5f\u53ef\u81ea\u5b9a\u4e49\u6587\u6848\u7b49\u5185\u5bb9\u3002"],["p",["code","Result \u7ed3\u679c\u9875"]],["pre",{lang:"js",highlighted:'<span class="token operator">&lt;</span>Result\n  type<span class="token operator">=</span><span class="token string">"error"</span>\n  title<span class="token operator">=</span><span class="token string">"\u63d0\u4ea4\u5931\u8d25"</span>\n  description<span class="token operator">=</span><span class="token string">"\u8bf7\u6838\u5bf9\u5e76\u4fee\u6539\u4ee5\u4e0b\u4fe1\u606f\u540e\uff0c\u518d\u91cd\u65b0\u63d0\u4ea4\u3002"</span>\n  actions<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Button size<span class="token operator">=</span><span class="token string">"large"</span> type<span class="token operator">=</span><span class="token string">"primary"</span><span class="token operator">></span>\u8fd4\u56de\u4fee\u6539<span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">></span><span class="token punctuation">}</span>\n  <span class="token operator">/</span><span class="token operator">></span>'},["code",'<Result\n  type="error"\n  title="\u63d0\u4ea4\u5931\u8d25"\n  description="\u8bf7\u6838\u5bf9\u5e76\u4fee\u6539\u4ee5\u4e0b\u4fe1\u606f\u540e\uff0c\u518d\u91cd\u65b0\u63d0\u4ea4\u3002"\n  actions={<Button size="large" type="primary">\u8fd4\u56de\u4fee\u6539</Button>}\n  />']],["p","\u8fd9\u4e2a\u7ec4\u4ef6\u4e00\u822c\u7528\u5728\u63d0\u4ea4\u7ed3\u679c\u5c55\u793a\uff0c\u6587\u6848\u64cd\u4f5c\u7b49\u5747\u53ef\u81ea\u5b9a\u4e49\u3002"],["h2","\u63d0\u793a\u6027\u62a5\u9519"],["h3","\u5e94\u7528\u573a\u666f"],["ul",["li",["p","\u8868\u5355\u9879\u6821\u9a8c\u62a5\u9519\u3002"]],["li",["p","\u64cd\u4f5c\u53cd\u9988\u3002"]],["li",["p","\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef\u3002"]]],["h3","\u5b9e\u73b0"],["p","\u5173\u4e8e\u8868\u5355\u9879\u62a5\u9519\uff0c\u8bf7\u53c2\u8003 ",["a",{title:null,href:"http://ant.design/components/form-cn/"},"antd Form"]," \u4e2d\u7684\u5b9e\u73b0\u3002\u5bf9\u4e8e\u64cd\u4f5c\u53cd\u9988\u548c\u7f51\u7edc\u8bf7\u6c42\u9519\u8bef\u63d0\u793a\uff0c\u6709\u4e00\u4e9b\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u7528\u5230\uff1a"],["ul",["li",["p",["a",{title:null,href:"http://ant.design/components/alert-cn/"},"Alert"]]],["li",["p",["a",{title:null,href:"http://ant.design/components/message-cn/"},"message"]]],["li",["p",["a",{title:null,href:"http://ant.design/components/notification-cn/"},"notification"]]]],["p","\u5728\u5355\u9875\u5e94\u7528\u4e2d\uff0c\u6700\u5e38\u89c1\u7684\u9700\u6c42\u5c31\u662f\u5904\u7406\u7f51\u7edc\u9519\u8bef\u4fe1\u606f\uff0c\u4e00\u822c\u6211\u4eec\u9700\u8981\u5bf9\u6b64\u8fdb\u884c\u7edf\u4e00\u5904\u7406\uff0c\u7531\u4e8e Ant Design Pro \u4f7f\u7528 ",["code","request.js"]," \u7edf\u4e00\u5904\u7406\u8bf7\u6c42\uff0c\u6240\u4ee5\u9519\u8bef\u7684\u5904\u7406\u4e5f\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u52a0\u5165\u5176\u4e2d\uff1a"],["pre",{lang:"js",highlighted:'<span class="token keyword">import</span> fetch <span class="token keyword">from</span> <span class="token string">\'dva/fetch\'</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// \u7ed3\u5408 antd \u4fe1\u606f\u7ec4\u4ef6\u663e\u793a\u9519\u8bef\u4fe1\u606f</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> notification <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'antd\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">function</span> <span class="token function">checkStatus</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> response<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> response<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token comment" spellcheck="true">// \u5224\u65ad\u8fd4\u56de\u7684\u5f02\u5e38\uff0c\u8fdb\u884c\u7edf\u4e00\u53cd\u9988</span>\n  <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        message<span class="token punctuation">:</span> result<span class="token punctuation">.</span>name<span class="token punctuation">,</span>\n        description<span class="token punctuation">:</span> result<span class="token punctuation">.</span>message<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>stack<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        message<span class="token punctuation">:</span> <span class="token string">\'\u8bf7\u6c42\u9519\u8bef\'</span><span class="token punctuation">,</span>\n        description<span class="token punctuation">:</span> result<span class="token punctuation">.</span>message<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    error<span class="token punctuation">.</span>response <span class="token operator">=</span> response<span class="token punctuation">;</span>\n    <span class="token keyword">throw</span> error<span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> defaultOptions <span class="token operator">=</span> <span class="token punctuation">{</span>\n    credentials<span class="token punctuation">:</span> <span class="token string">\'include\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token keyword">const</span> newOptions <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>defaultOptions<span class="token punctuation">,</span> <span class="token operator">...</span>options <span class="token punctuation">}</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>newOptions<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">\'POST\'</span> <span class="token operator">||</span> newOptions<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">\'PUT\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    newOptions<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>\n      Accept<span class="token punctuation">:</span> <span class="token string">\'application/json\'</span><span class="token punctuation">,</span>\n      <span class="token string">\'Content-Type\'</span><span class="token punctuation">:</span> <span class="token string">\'application/json; charset=utf-8\'</span><span class="token punctuation">,</span>\n      <span class="token operator">...</span>newOptions<span class="token punctuation">.</span>headers<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n    newOptions<span class="token punctuation">.</span>body <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newOptions<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> newOptions<span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>checkStatus<span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">></span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> err <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>'},["code","import fetch from 'dva/fetch';\n\n// \u7ed3\u5408 antd \u4fe1\u606f\u7ec4\u4ef6\u663e\u793a\u9519\u8bef\u4fe1\u606f\nimport { notification } from 'antd';\n\nfunction checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  }\n\n  // \u5224\u65ad\u8fd4\u56de\u7684\u5f02\u5e38\uff0c\u8fdb\u884c\u7edf\u4e00\u53cd\u9988\n  return response.json().then((result) => {\n    if (result.code) {\n      notification.error({\n        message: result.name,\n        description: result.message,\n      });\n    }\n    if (result.stack) {\n      notification.error({\n        message: '\u8bf7\u6c42\u9519\u8bef',\n        description: result.message,\n      });\n    }\n    const error = new Error(result.message);\n    error.response = response;\n    throw error;\n  });\n}\n\nexport default function request(url, options) {\n  const defaultOptions = {\n    credentials: 'include',\n  };\n  const newOptions = { ...defaultOptions, ...options };\n  if (newOptions.method === 'POST' || newOptions.method === 'PUT') {\n    newOptions.headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json; charset=utf-8',\n      ...newOptions.headers,\n    };\n    newOptions.body = JSON.stringify(newOptions.body);\n  }\n\n  return fetch(url, newOptions)\n    .then(checkStatus)\n    .then(response => response.json())\n    .catch(err => ({ err }));\n}"]]],meta:{order:16,title:"\u9519\u8bef\u5904\u7406",type:"\u8fdb\u9636",filename:"docs/error.md"},toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#\u9875\u9762\u7ea7\u62a5\u9519",title:"\u9875\u9762\u7ea7\u62a5\u9519"},"\u9875\u9762\u7ea7\u62a5\u9519"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u63d0\u793a\u6027\u62a5\u9519",title:"\u63d0\u793a\u6027\u62a5\u9519"},"\u63d0\u793a\u6027\u62a5\u9519"]]]}}});